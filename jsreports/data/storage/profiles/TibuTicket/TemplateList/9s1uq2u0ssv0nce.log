{"type":"operationStart","subtype":"profile","data":{"_id":"oEMKwKeuYQoNV1Yx","timestamp":"2024-02-20T17:33:31.919Z","state":"queued","mode":"standard","creationDate":"2024-02-20T17:33:31.920Z","modificationDate":"2024-02-20T17:33:31.920Z","shortid":"nx5uIKO","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708450411919,"id":"aa3gxatqgafdiuf","previousOperationId":null,"operationId":"4o91k1rm3mqzu84"}
{"type":"log","level":"info","message":"Render request 8 queued for execution and waiting for available worker","previousOperationId":"4o91k1rm3mqzu84","timestamp":1708450411919,"id":"i1hsqks91n7a19k"}
{"type":"operationStart","subtype":"render","name":"TemplateList","previousOperationId":"4o91k1rm3mqzu84","timestamp":1708450411927,"id":"k0gyyc8duetncdh","previousEventId":"aa3gxatqgafdiuf","operationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411927,"level":"info","message":"Starting rendering request 8","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"kny8m11rxu4gvpk","previousOperationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411927,"level":"info","message":"Rendering template { name: TemplateList, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"y4rpbqi2jist202","previousOperationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411928,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"3x4jrzk2teljhpp","previousOperationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411930,"level":"debug","message":"Executing script list-data (beforeRender)","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"nugao17rabwl7h0","previousOperationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411938,"level":"warn","message":"Error when processing render request 8\n(because) error when evaluating custom script /TibuTicket/list-data\nCannot use import statement outside a module\nsandbox.js:1\n;(async () => { await 1;const mnldjhfjta_executionFn_expose = mnldjhfjta_executionFn;delete this.__handleError;delete this['mnldjhfjta_executionFn'];import fetch from 'node-fetch';\n                                                                                                                                                     ^^^^^^\n\nSyntaxError: Cannot use import statement outside a module\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"51pmz5yctay8647","previousOperationId":"httjlsj9d0skftq"}
{"type":"log","timestamp":1708450411938,"level":"warn","message":"Rendering request 8 finished with error in 20 ms","meta":{"rootId":"9s1uq2u0ssv0nce","id":"9s1uq2u0ssv0nce"},"id":"vpfewws40h0hv0x","previousOperationId":"httjlsj9d0skftq"}
{"type":"error","timestamp":1708450411940,"statusCode":400,"weak":true,"entity":{"shortid":"6v8QPG_9N3","name":"list-data","content":"import fetch from 'node-fetch';\n\nasync function fetchlists() {\n    const response = await fetch('http://localhost:4000/api/v1/lists');\n    if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);\n    }\n    const lists = await response.json();\n    console.log(lists)\n    return lists;\n}\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.lists = await fetchlists();\n        console.log(req.data.lists)\n    } catch (error) {\n        console.error('Error fetching lists:', error);\n    }\n}"},"property":"content","logged":true,"previousOperationId":"httjlsj9d0skftq","id":"sd22tw2xvn8jukr","stack":"sandbox.js:1\n;(async () => { await 1;const mnldjhfjta_executionFn_expose = mnldjhfjta_executionFn;delete this.__handleError;delete this['mnldjhfjta_executionFn'];import fetch from 'node-fetch';\n                                                                                                                                                     ^^^^^^\n\nSyntaxError: Cannot use import statement outside a module\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/workspace/tibuTicket/jsreports/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","message":"Error when evaluating custom script /TibuTicket/list-data\nCannot use import statement outside a module"}
